# photography-nfts

Brownie framework project to create photography NFTs. It includes the solidity smart contract and the scripts to 1) deploy the contract on mainnet or testnet 2) create the NFT metadata, upload it to the pinata pinning service, and mint the collectible. 

The project also includes:
- script to calculate an estimate of gas fees in ETH and USD. 
- testing files to validate the contract
 
 ##  Prerequisites

Install the following:

- [nodejs and npm](https://nodejs.org/en/download/) or [yarn](https://classic.yarnpkg.com/lang/en/docs/install/#mac-stable)

- [python](https://www.python.org/downloads/)

##  Installation

1. [Install Brownie](https://eth-brownie.readthedocs.io/en/stable/install.html)

```bash
pip install eth-brownie
```

2. Clone the repo

```
git clone https://github.com/fernandoe321/photography-nfts.git
cd photography-nfts
```

3. [Install ganache](https://www.npmjs.com/package/ganache)

```bash
npm install -g ganache
```

4. To deploy to mainnet or testnets, set your environment variables:

You can add your environment variables to a `.env` file:

### Deployment account
```
export PRIVATE_KEY=
export MNEMONIC=
export WEB3_INFURA_PROJECT_ID=
export ETHERSCAN_TOKEN=
```

###  Pinata IPFS pinning service
Allows you to automatically upload the image and the metadata .json file to pinata.
```
export PINATA_API_KEY=
export PINATA_API_SECRET=
export UPLOAD_PINATA=
```

# Usage

It's recommended that you test and build on a local development network (ganache) so you don't have to wait as long for transactions. You can then deploy the contract to rinkeby (testnet) and see your NFTs on OpenSea.

You can get free ETH for testing here: https://rinkebyfaucet.com

1) Compile the contract
```bash
brownie compile
```
2) Deploy the contract to a testnet 
```bash
 brownie run scripts/deploy_n_create/deploy.py --network rinkeby
```
3) Add the image for the NFT inside `./metadata/image/`
4) Add the NFT metadata to `nft_info.yaml`. This file gets read by `create_nft.py` to populate the `sample_metadata.py` template 

5) Run brownie again to create the metadata json file, upload the image and metadata files to pinata, and create the NFT
```bash
 brownie run scripts/deploy_n_create/create_nft.py --network rinkeby
```

## Bonus Gas Fee Calculator
This script calculates an estimate of the gas fees given the total gas usage of a transaction. 

Made this because I was too lazy to do gas fee calculations manually or use an online tool as I was working on the project. 

`[--current_gas]` Can be found here: [gastracker](https://etherscan.io/gastracker)
`[--tx_total_gas]` This number is the total gas used by a transaction. You can get this number after executing a transaction in a testnet, and looking up the txn details on Etherscan. Search by Tx Hash -> Look for: Gas Limit & Usage by Txn
`[--eth_usd_price]` Current price of ETH/USD

```bash
 python scripts/calculate_gas.py [--current_gas] [--tx_total_gas]  [--eth_usd_price]
```

# Testing

Set the `MNEMONIC` variable to one of the test accounts generated by ganache. You can get this by simply running `ganache` on another console. 

Then run:
```bash
 brownie test -v
```

#  Verify on Etherscan

By setting `ETHERSCAN_TOKEN` in you .env file brownie will automatically verify and publish your contract source to Etherscan.